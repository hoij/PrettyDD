#include "parser_param_test.h"

#include <gtest/gtest.h>


INSTANTIATE_TEST_CASE_P(otherAndYourPetHitByOther, ParseTest,
    testing::Values(
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Sheila Marlene hit Predator Rogue for 461 points of melee damage."),
            ExtendedLineInfo("Sheila Marlene",
                             "Predator Rogue",
                             DAMAGE,
                             "melee",
                             461)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Sgtcuddle hit Predator Rogue for 4302 points of Burst damage."),
            ExtendedLineInfo("Sgtcuddle",
                             "Predator Rogue",
                             DAMAGE,
                             "Burst",
                             4302)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Sgtcuddle hit Predator Rogue for 15000 points of Full Auto damage."),
            ExtendedLineInfo("Sgtcuddle",
                             "Predator Rogue",
                             DAMAGE,
                             "Full Auto",
                             15000)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Balas's reflect shield hit Junebop for 161 points of damage."),
            ExtendedLineInfo("Balas",
                             "Junebop",
                             DAMAGE,
                             "reflect shield",
                             161)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Letter hit Reet of Paradise for 1586 points of melee damage.Critical hit!"),
            ExtendedLineInfo("Letter",
                             "Reet of Paradise",
                             DAMAGE,
                             "melee",
                             1586,
                             true)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Cratdat hit Ensign - Ilari'Ra for 801 points of projectile damage. Glancing hit."),
            ExtendedLineInfo("Cratdat",
                             "Ensign - Ilari'Ra",
                             DAMAGE,
                             "projectile",
                             801,
                             false,
                             true)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Someone absorbed 8198 points of energy damage."),
            ExtendedLineInfo("Unknown",
                             "Someone",
                             DAMAGE,
                             "energy",
                             8198)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Something hit Addicted2 for 49 points of damage by reflect shield."),
            ExtendedLineInfo("Unknown",
                             "Addicted2",
                             DAMAGE,
                             "reflect shield",
                             49)),
        std::make_tuple(
            FormattedLineStub("Other hit by other",
                              "Something hit Enfodruid for 1 points of damage by damage shield."),
            ExtendedLineInfo("Unknown",
                             "Enfodruid",
                             DAMAGE,
                             "damage shield",
                             1)),
        std::make_tuple(
            FormattedLineStub("Your pet hit by other",
                              "Letter hit Guard for 623 points of melee damage."),
            ExtendedLineInfo("Letter",
                             "Guard",
                             DAMAGE,
                             "melee",
                             623)),
        std::make_tuple(
            FormattedLineStub("Your pet hit by other",
                              "Letter hit Guard for 1268 points of melee damage.Critical hit!"),
            ExtendedLineInfo("Letter",
                             "Guard",
                             DAMAGE,
                             "melee",
                             1268,
                             true))));

INSTANTIATE_TEST_CASE_P(otherHitByNano, ParseTest,
    testing::Values(
        std::make_tuple(
            FormattedLineStub("Other hit by nano",
                              "Predator Rogue was attacked with nanobots from Sgtcuddle for 1293 points of energy damage."),
            ExtendedLineInfo("Sgtcuddle",
                             "Predator Rogue",
                             DAMAGE,
                             "energy",
                             1293,
                             false,
                             false,
                             false,
                             true)),
        std::make_tuple(
            FormattedLineStub("Other hit by nano",
                              "Frozen Spinetooth was attacked with nanobots for 445 points of unknown damage."),
            ExtendedLineInfo("Unknown",
                             "Frozen Spinetooth",
                             DAMAGE,
                             "unknown",
                             445,
                             false,
                             false,
                             false,
                             true)),
        std::make_tuple(
            FormattedLineStub("Other hit by nano",
                              "Blackbullet0 was attacked with nanobots for 715 points of poison damage."),
            ExtendedLineInfo("Unknown",
                             "Blackbullet0",
                             DAMAGE,
                             "poison",
                             715,
                             false,
                             false,
                             false,
                             true)),
        // The receiver has a name containing "of" which could cause problems.
        std::make_tuple(
            FormattedLineStub("Other hit by nano",
                              "Xan Spirit of Redemption was attacked with nanobots for 2162 points of unknown damage."),
            ExtendedLineInfo("Unknown",
                             "Xan Spirit of Redemption",
                             DAMAGE,
                             "unknown",
                             2162,
                             false,
                             false,
                             false,
                             true))));

INSTANTIATE_TEST_CASE_P(yourPetHitByMonster, ParseTest,
    testing::Values(
        std::make_tuple(
            FormattedLineStub("Your pet hit by monster",
                              "Your pet Letter was damaged by a toxic substance for 3 points of damage."),
            ExtendedLineInfo("Environment",
                             "Letter",
                             DAMAGE,
                             "a toxic substance",
                             3))));

INSTANTIATE_TEST_CASE_P(yourPetHitByNano, ParseTest,
    testing::Values(
        std::make_tuple(
            FormattedLineStub("Your pet hit by nano",
                              "Letter was attacked with nanobots from Tekory for 1339 points of chemical damage."),
            ExtendedLineInfo("Tekory",
                             "Letter",
                             DAMAGE,
                             "chemical",
                             1339,
                             false,
                             false,
                             false,
                             true)),
        std::make_tuple(
            FormattedLineStub("Your pet hit by nano",
                             "Letter was attacked with nanobots from Tekory for 175 points of melee damage."),
            ExtendedLineInfo("Tekory",
                             "Letter",
                             DAMAGE,
                             "melee",
                             175,
                             false,
                             false,
                             false,
                             true))));
